install.packages('cqrReg')
library(tictoc)
library(cqrReg)
install.packages('cqrReg')
install.packages('RcppArmadillo')
install.packages("simmer")
library(simmer)
install.packages("remotes")
remotes::install_github("r-simmer/simmer")
remotes::install_github("r-simmer/simmer")
install.packages("Rcpp")
install.packages("simmer")
install.packages("installr")
install.packages("stringr")
library(stringr)
library(installr)
R.version.string
Sys.which("make")
install.packages("remotes")
install.packages("remotes")
install.packages("simmer")
install.packages("simmer")
library(simmer)
customer <-
trajectory("Customer's path") %>%
log_("Here I am") %>%
timeout(10) %>%
log_("I must leave")
bank <-
simmer("bank") %>%
add_generator("Customer", customer, at(5))
bank %>% run(until = 100)
Sys.which("make")
Sys.which("make")
bank %>% get_mon_arrivals()
library(simmer)
customer <-
trajectory("Customer's path") %>%
log_("Here I am") %>%
timeout(10) %>%
log_("I must leave")
bank <-
simmer("bank") %>%
add_generator("Customer", customer, at(5))
bank %>% run(until = 100)
bank %>% get_mon_arrivals()
set.seed(1289)
customer <-
trajectory("Customer's path") %>%
log_("Here I am") %>%
timeout(12) %>%
log_("I must leave")
bank <-
simmer("bank") %>%
add_generator("Customer", customer, function() {c(0, rexp(4, 1/10), -1)})
bank %>% run(until = 400)
library(parallel)
library(simmer)
library(parallel)
customer <-
trajectory("Customer's path") %>%
seize("counter") %>%
timeout(function() {rexp(1, 1/12)}) %>%
release("counter")
mclapply(c(393943, 100005, 777999555, 319999772), function(the_seed) {
set.seed(the_seed)
bank <-
simmer("bank") %>%
add_resource("counter", 2) %>%
add_generator("Customer", customer, function() {c(0, rexp(49, 1/10), -1)})
bank %>% run(until = 400)
result <-
bank %>%
get_mon_arrivals() %>%
transform(waiting_time = end_time - start_time - activity_time)
paste("Average wait for ", sum(result$finished), " completions was ",
mean(result$waiting_time), "minutes.")
}) %>% unlist()
library(simmer)
set.seed(1933)
bank <- simmer()
customer <-
trajectory("Customer's path") %>%
set_attribute("start_time", function() {now(bank)}) %>%
log_(function() {
paste("Queue is", get_queue_count(bank, "counter"), "on arrival")
}) %>%
seize("counter") %>%
log_(function() {paste("Waited", now(bank) - get_attribute(bank, "start_time"))}) %>%
timeout(12) %>%
release("counter") %>%
log_("Completed")
bank <-
simmer("bank") %>%
add_resource("counter") %>%
add_generator("Customer", customer, function() {c(0, rexp(4, 1/10), -1)}) %>%
add_generator("Guido", customer, at(23), priority = 1)
bank %>% run(until = 400)
maxTime = 400
set.seed(393937)
bank <- simmer()
customer <-
trajectory("Customer's path") %>%
log_(function()
if (get_capacity(bank, "door") == 0)
"Here I am but the door is shut."
else "Here I am and the door is open."
) %>%
seize("door") %>%
log_("I can go in!") %>%
release("door") %>%
seize("counter") %>%
timeout(function() {rexp(1, 1/10)}) %>%
release("counter")
openTime <- rexp(1, 1/10)
door_schedule <- schedule(c(0, openTime), c(0, Inf))
doorman <-
trajectory() %>%
timeout(openTime) %>%
log_("Ladies and Gentlemen! You may all enter.")
bank <-
simmer("bank") %>%
add_resource("door", capacity = door_schedule) %>%
add_resource("counter") %>%
add_generator("Customer",
customer,
at(c(0, cumsum(rexp(5 - 1, 0.1))))) %>%
add_generator("Doorman", doorman, at(0))
bank %>% run(until = maxTime)
library(simmer)
# 设置随机种子，保证结果可重复
set.seed(1289)
# 定义顾客的行为轨迹
customer <-
trajectory("Customer's path") %>%
log_("Here I am") %>%
timeout(12) %>%
log_("I must leave")
# 银行的开门和关门时间
open_time <- 8 * 60  # 8:00 AM，转换为分钟
close_time <- 17 * 60  # 5:00 PM，转换为分钟
# 顾客到达时间的指数分布参数
rate <- 1/10  # 平均每10分钟到达一个顾客
# 自定义顾客生成器，使用 from_to 控制顾客的到达时间范围
bank <-
simmer("bank") %>%
add_generator("Customer", customer, from_to(open_time, close_time, function() {rexp(1, rate)}))
# 运行仿真，直到关门后的较长时间段（如多加几小时），以确保所有服务完成
bank %>% run(until = close_time + 240)
setwd("E:/project/GMM/QRGMM_vs_CWGANGP_revise_v2/QRGMM/Bank_Simulator")
dir_list <- c(
"./data",
"./data/traindata",
"./data/testdata",
"./data/onlinetest",
"./data/testdata_QRNNGMM",
"./data/onlinetest/testdata_QRNNGMM_online"
)
for (d in dir_list) {
if (!dir.exists(d)) {
dir.create(d, recursive = TRUE)
}
}
source('E:/project/GMM/QRGMM_vs_CWGANGP_revise_v2/QRGMM/Bank_Simulator/BankSimulator_QRNNGMM_OnlineGenerationTiming.R')
